!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p=t()}}(function(){return function t(e,n,o){function i(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return i(n?n:t)},f,f.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){function o(t,e,n){var o=t[e];if(!t[e])throw Error("Can't create aspect for method "+e+". Method does not exist.");t[e]=function(){n.before&&n.before.apply(this,arguments);var t=o.apply(this,arguments);return n.after&&(t=n.after.call(this,t,arguments)),t}}var i=function(t){return{aop:function(e,n){return e instanceof Array||(e=[e]),e.forEach(function(e){o(t,e,n)},this),this}}};e.exports=i},{}],2:[function(t,e,n){var o=t("./protoplast"),i=o.extend({$create:function(){this._children=[],this.root=document.createElement(this.tag||"div")},__fastinject__:{get:function(){return this.___fastinject___},set:function(t){this.___fastinject___=t,this._children.forEach(function(t){this.__fastinject__(t),t.__fastinject__=this.__fastinject__},this)}},init:{inject_init:!0,value:function(){}},destroy:function(){this._children.concat().forEach(function(t){this.remove(t)},this)},add:function(t){if(!t)throw new Error("Child component cannot be null");if(!t.root)throw new Error("Child component should have root property");this._children.push(t),this.__fastinject__&&this.__fastinject__(t),this.root.appendChild(t.root)},remove:function(t){var e=this._children.indexOf(t);-1!==e&&(this._children.splice(e,1),this.root.removeChild(t.root),t.destroy())}});i.Root=function(t,e){var n=i.create();return n.root=t,e&&e.register(n),n},e.exports=i},{"./protoplast":6}],3:[function(t,e,n){var o=t("./utils"),i={uniqueId:function(){this.$id=o.uniqueId(this.$meta.$prefix)},autobind:function(){for(var t in this)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}};e.exports=i},{"./utils":7}],4:[function(t,e,n){var o=t("./protoplast"),i=t("./dispatcher"),r=o.extend({$create:function(){var t=this;this._objects={pub:function(e,n){t._dispatcher.dispatch(e,n)},sub:function(e){var n=this;return{add:function(o){t._dispatcher.on(e,o,n)},remove:function(o){t._dispatcher.off(e,o,n)}}}},this._unknows=[],this._dispatcher=i.create()},_objects:null,register:function(t,e){1==arguments.length?(e=t,this._unknows.push(e)):this._objects[t]=e,e.__fastinject__=function(t){this.register(t),this.process(t)}.bind(this),e.$meta&&e.$meta.inject&&this.inject(e,e.$meta.inject)},process:function(t){t.$meta&&t.$meta.inject_init&&Object.keys(t.$meta.inject_init).forEach(function(e){t[e]()},this),t.$meta&&t.$meta.sub&&Object.keys(t.$meta.sub).forEach(function(e){this._objects.sub.call(t,t.$meta.sub[e]).add(t[e])},this)},inject:function(t,e){var n,o=this;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],function(e){Object.defineProperty(t,i,{get:function(){return o._objects[e]}})}(n))},build:function(){Object.keys(this._objects).forEach(function(t){var e=this._objects[t];this.process(e)},this),this._unknows.forEach(function(t){this.process(t)},this)}});e.exports=r},{"./dispatcher":5,"./protoplast":6}],5:[function(t,e,n){var o=t("./protoplast"),i=o.extend({dispatch:function(t,e){this._topics=this._topics||{},(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,e)})},on:function(t,e,n){if(!e)throw new Error("Handler is required for event "+t);this._topics=this._topics||{},this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:e,context:n})},off:function(t,e,n){this._topics=this._topics||{},this._topics[t]=this._topics[t].filter(function(t){return e?t.handler!==e:t.context!==n})}});e.exports=i},{"./protoplast":6}],6:[function(t,e,n){var o=t("./utils"),i={$meta:{},create:function(){return o.createObject(this,arguments)}};i.extend=function(t,e){var n,i,r,s=Object.create(this);t instanceof Array||(e=t,t=[]),e=e||{},t=t||[],n=e.$meta||{},delete e.$meta,void 0!==e.$create&&(n.$constructors=n.$constructors||[],n.$constructors.push(e.$create),delete e.$create),s=o.mixin(s,t);for(var c in e){if(r=!1,"[object Object]"!==Object.prototype.toString.call(e[c]))r=!0,i={value:e[c],writable:!0,enumerable:!0};else{i=e[c];for(var a in i)-1===["value","get","set","writable","enumerable"].indexOf(a)?(n[a]=n[a]||{},n[a][c]=i[a],delete i[a]):r=!0}r&&Object.defineProperty(s,c,i)}return s.$meta=o.merge(n,this.$meta),s.$super=this,o.processPrototype(s),s},e.exports=i},{"./utils":7}],7:[function(t,e,n){function o(t){var e=++u;return(t||"")+e}function i(t,e){var n=Object.create(t);return n.$meta.$constructors&&n.$meta.$constructors.forEach(function(t){t.apply(n,e)}),n}function r(t){t.$meta.$processors&&t.$meta.$processors.forEach(function(e){e(t)})}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(e[n]instanceof Array?t[n]=e[n].concat(t[n]||[]):-1!==["number","boolean","string"].indexOf(typeof e[n])?t.hasOwnProperty(n)||(t[n]=e[n]):(t[n]=t[n]||{},s(t[n],e[n])));return t}function c(t,e){for(var n in e)"__"!==n.substr(0,2)&&(t[n]=e[n]);return t}function a(t,e){return e.forEach(function(e){c(t,e)}),t}var u=0;e.exports={createObject:i,processPrototype:r,merge:s,mixin:a,uniqueId:o}},{}],8:[function(t,e,n){var o=t("./js/protoplast"),i=t("./js/aop"),r=t("./js/dispatcher"),s=t("./js/di"),c=t("./js/component"),a=t("./js/utils"),u=t("./js/constructors"),f={extend:o.extend.bind(o),create:o.create.bind(o),Dispatcher:r,Aop:i,Context:s,Component:c,constructors:u,utils:a};e.exports=f},{"./js/aop":1,"./js/component":2,"./js/constructors":3,"./js/di":4,"./js/dispatcher":5,"./js/protoplast":6,"./js/utils":7}]},{},[8])(8)});