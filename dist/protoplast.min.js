!function(t){"use strict";function n(t){function n(t,n){return t.map(function(t){return t[n]}).filter(Boolean)}t=t||[];var o={},i={};return i.default_config=n(t,"default_config_processor"),i.merge_config=n(t,"merge_config_processor"),i.pre_init=n(t,"pre_init_processor"),i.post_init=n(t,"post_init_processor"),i.constructor=n(t,"constructor_processor"),i.proto=n(t,"proto_processor"),i.protoplast=n(t,"protoplast_processor"),o.__config={},o.init=function(){},i.default_config.forEach(function(t){t.call(null,o.__config)}),o.extend=function(t){var n,r,c=Object.create(this),s=this,e={};return t=t||function(){},r=t(c,this,e),i.merge_config.forEach(function(t){t.call(null,e,c.__config)}),c.__config=e,i.proto.forEach(function(t){t.call(null,c,r,s,o)}),n=function(){var t=Object.create(c),n=Array.prototype.slice.call(arguments);return i.pre_init.forEach(function(i){i.call(null,t,n,c,s,o)}),t.init.apply(t,n),i.post_init.forEach(function(i){i.call(null,t,n,c,s,o)}),t},n.extend=o.extend.bind(c),n.__proto=c,i.constructor.forEach(function(t){t.call(null,n,c,s,o)}),n},i.protoplast.forEach(function(t){t.call(null,o)}),o}t.Protoplast={create:n,plugins:{},get_all_plugins:function(){var t=[];for(var n in this.plugins)t.push(this.plugins[n]);return t}}}(this),function(t){"use strict";function n(t,n,o,i){i=i||t[n],t[n]=function(){o.before&&o.before.apply(this,arguments);var t=i.apply(this,arguments);return o.after&&(t=o.after.apply(this,arguments)),t}}var o=t.Protoplast;o.plugins.aop={wrap:n,constructor_processor:function(t,o,i){t.aop=function(t,r){t instanceof Array||(t=[t]),t.forEach(function(t){if(o[t]instanceof Function){o.hasOwnProperty(t)||(o[t]=function(){i[t].apply(this,arguments)});var c=o[t];n(o,t,r,c)}})}}}}(this),function(t){"use strict";function n(t){return function(){return c[t]instanceof Function?c[t].apply(this,arguments):c[t]}}function o(t,n){for(var o in n)t[o]=n[o];return t}function i(t,o){for(var i in o)t[i]=n(o[i]).bind(t)}var r=t.Protoplast,c={};r.plugins.di={merge_config_processor:function(t,n){t.inject=o(t.inject||{},n.inject||{})},pre_init_processor:function(t,n,o){i(t,o.__config.inject)},protoplast_processor:function(t){t.register=function(t,n){c[t]=n}}}}(this),function(t){"use strict";var n=t.Protoplast;n.plugins.dispatcher={protoplast_processor:function(t){t.Dispatcher=t.extend(function(t){t.dispatch=function(t,n){this._topics=this._topics||{},(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,n)})},t.on=function(t,n,o){this._topics=this._topics||{},this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:n,context:o})},t.off=function(t,n,o){this._topics=this._topics||{},this._topics[t]=this._topics[t].filter(function(t){return n?t.handler!==n:t.context!==o})}})}}}(this),function(t){"use strict";function n(t,n){for(var o in n)"init"!==o&&(t[o]=n[o]);return t}function o(t,o){return o.forEach(function(o){n(t,o())}),t}var i=t.Protoplast;i.plugins.mixin={merge_config_processor:function(t,n){t.mixin=(t.mixin||[]).concat(n.mixin||[])},pre_init_processor:function(t,n,i){o(t,i.__config.mixin)}}}(this),function(t){"use strict";var n=t.Protoplast;n.plugins.pubsub={protoplast_processor:function(t){t.register("pub",function(n,o){t.dispatcher.dispatch(n,o)}),t.register("sub",function(n){var o=this;return{add:function(i){t.dispatcher.on(n,i,o)},remove:function(i){t.dispatcher.off(n,i,o)}}}),t.dispatcher=t.Dispatcher()}}}(this);