!function(t){"use strict";function n(t){function n(t,n){return t.map(function(t){return t[n]}).filter(Boolean)}t=t||{},t.plugins=t.plugins||[];var i={},o=n(t.plugins,"protoplast_processor");return i.__config=t,i.init=function(){},i.extend=function(t){var o,r,c=Object.create(this),s=this,u={};t=t||function(){},r=t(c,this,u),u.plugins=(this.__config.plugins||[]).concat(u.plugins||[]);var e={};return e.merge_config=n(u.plugins,"merge_config_processor"),e.pre_init=n(u.plugins,"pre_init_processor"),e.post_init=n(u.plugins,"post_init_processor"),e.constructor=n(u.plugins,"constructor_processor"),e.proto=n(u.plugins,"proto_processor"),e.protoplast=n(u.plugins,"protoplast_processor"),e.merge_config.forEach(function(t){t.call(null,u,c.__config)}),c.__config=u,e.proto.forEach(function(t){t.call(null,c,r,s,i)}),o=function(){var t=Object.create(c),n=Array.prototype.slice.call(arguments);return e.pre_init.forEach(function(o){o.call(null,t,n,c,s,i)}),t.init.apply(t,n),e.post_init.forEach(function(o){o.call(null,t,n,c,s,i)}),t},o.extend=i.extend.bind(c),o.__proto=c,e.constructor.forEach(function(t){t.call(null,o,c,s,i)}),o},o.forEach(function(t){t.call(null,i)}),i}t.Protoplast={create:n,plugins:{},get_all_plugins:function(){var t=[];for(var n in this.plugins)t.push(this.plugins[n]);return t}}}(this),function(t){"use strict";function n(t,n,i,o){o=o||t[n],t[n]=function(){i.before&&i.before.apply(this,arguments);var t=o.apply(this,arguments);return i.after&&(t=i.after.apply(this,arguments)),t}}var i=t.Protoplast;i.plugins.aop={wrap:n,constructor_processor:function(t,i,o){t.aop=function(t,r){t instanceof Array||(t=[t]),t.forEach(function(t){if(i[t]instanceof Function){i.hasOwnProperty(t)||(i[t]=function(){o[t].apply(this,arguments)});var c=i[t];n(i,t,r,c)}})}}}}(this),function(t){"use strict";function n(t){return function(){return c[t]instanceof Function?c[t].apply(this,arguments):c[t]}}function i(t,n){for(var i in n)t[i]=n[i];return t}function o(t,i){for(var o in i)t[o]=n(i[o]).bind(t)}var r=t.Protoplast,c={};r.plugins.di={merge_config_processor:function(t,n){t.inject=i(t.inject||{},n.inject||{})},pre_init_processor:function(t,n,i){o(t,i.__config.inject)},protoplast_processor:function(t){t.register=function(t,n){c[t]=n}}}}(this),function(t){"use strict";var n=t.Protoplast;n.plugins.dispatcher={protoplast_processor:function(t){t.Dispatcher=t.extend(function(t){t.dispatch=function(t,n){this._topics=this._topics||{},(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,n)})},t.on=function(t,n,i){this._topics=this._topics||{},this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:n,context:i})},t.off=function(t,n,i){this._topics=this._topics||{},this._topics[t]=this._topics[t].filter(function(t){return n?t.handler!==n:t.context!==i})}})}}}(this),function(t){"use strict";function n(t,n){for(var i in n)"init"!==i&&(t[i]=n[i]);return t}function i(t,i){return i.forEach(function(i){n(t,i())}),t}var o=t.Protoplast;o.plugins.mixin={merge_config_processor:function(t,n){t.mixin=(t.mixin||[]).concat(n.mixin||[])},pre_init_processor:function(t,n,o){i(t,o.__config.mixin)}}}(this),function(t){"use strict";var n=t.Protoplast;n.plugins.pubsub={protoplast_processor:function(t){t.register("pub",function(n,i){t.dispatcher.dispatch(n,i)}),t.register("sub",function(n){var i=this;return{add:function(o){t.dispatcher.on(n,o,i)},remove:function(o){t.dispatcher.off(n,o,i)}}}),t.dispatcher=t.Dispatcher()}}}(this);