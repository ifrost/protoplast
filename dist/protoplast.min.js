!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p=t()}}(function(){return function t(e,o,i){function n(s,c){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){var o=e[s][1][t];return n(o?o:t)},p,p.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,o){var i=t("./protoplast"),n=t("./component"),r=t("./di"),s=i.extend({config:null,context:null,$create:function(){this.context=r.create()},start:function(t){this.config=t;for(var e in this.config.context)this.context.register(e,this.config.context[e]);if(this.context.build(),t.view&&t.view.root&&(this.root=n.Root(t.view.root,this.context),t.view.top)){var o=t.view.top.constructor===Array?t.view.top:[t.view.top];o.forEach(function(t){this.root.add(t)},this)}}});e.exports=s},{"./component":2,"./di":4,"./protoplast":7}],2:[function(t,e,o){var i=t("./protoplast"),n=(t("./utils"),i.extend({__registry:{value:{}},tag:"",html:"",root:{get:function(){return this._root},set:function(t){this._root=t,this.process_root()}},process_root:function(){var t,e,o,i;this._root&&(this.$meta.dom_processors||[]).forEach(function(n){for(e=this._root.querySelectorAll("["+n.attribute+"]"),t=0;t<e.length;t++)o=e[t],i=o.getAttribute(n.attribute),n.process(this,o,i)},this)},$create:function(){this._children=[],this._inlines=[],this.tag||this.html||(this.tag="div"),this.tag&&!this.html&&(this.html="<"+this.tag+"></"+this.tag+">");var t=document.createElement("div");t.innerHTML=this.html,this.root=t.firstChild},__fastinject__:{get:function(){return this.___fastinject___},set:function(t){this.___fastinject___=t,this._children.concat(this._inlines).forEach(this.__fastinject__,this)}},init:{inject_init:!0,value:function(){}},destroy:function(){this._children.concat(this._inlines).forEach(function(t){this.remove(t)},this)},add:function(t){if(!t)throw new Error("Child component cannot be null");if(!t.root)throw new Error("Child component should have root property");this._children.push(t),this.__fastinject__&&this.__fastinject__(t),this.root.appendChild(t.root)},remove:function(t){var e=this._children.indexOf(t);-1!==e&&(this._children.splice(e,1),this.root.removeChild(t.root),t.destroy())},attach:function(t,e){this._inlines.push(t),this.root.insertBefore(t.root,e),this.root.removeChild(e)}}));n.Root=function(t,e){var o=n.create();return o.root=t,e&&e.register(o),o},e.exports=n},{"./protoplast":7,"./utils":9}],3:[function(t,e,o){var i=t("./utils"),n={uniqueId:function(){this.$id=i.uniqueId(this.$meta.$prefix)},autobind:function(){for(var t in this)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}};e.exports=n},{"./utils":9}],4:[function(t,e,o){var i=t("./protoplast"),n=t("./dispatcher"),r=i.extend({$create:function(){var t=this;this._objects={pub:function(e,o){t._dispatcher.dispatch(e,o)},sub:function(e){var o=this;return{add:function(i){t._dispatcher.on(e,i,o)},remove:function(i){t._dispatcher.off(e,i,o)}}}},this._unknows=[],this._dispatcher=n.create()},_objects:null,register:function(t,e){1==arguments.length?(e=t,this._unknows.push(e)):this._objects[t]=e,e.__fastinject__=function(t){this.register(t),this.process(t)}.bind(this),e.$meta&&e.$meta.properties&&e.$meta.properties.inject&&this.inject(e,e.$meta.properties.inject)},process:function(t){t.$meta&&t.$meta.properties&&t.$meta.properties.inject_init&&Object.keys(t.$meta.properties.inject_init).forEach(function(e){t[e]()},this),t.$meta&&t.$meta.properties&&t.$meta.properties.sub&&Object.keys(t.$meta.properties.sub).forEach(function(e){this._objects.sub.call(t,t.$meta.properties.sub[e]).add(t[e])},this)},inject:function(t,e){var o,i=this;for(var n in e)e.hasOwnProperty(n)&&(o=e[n],function(e){Object.defineProperty(t,n,{get:function(){return i._objects[e]}})}(o))},build:function(){Object.keys(this._objects).forEach(function(t){var e=this._objects[t];this.process(e)},this),this._unknows.forEach(function(t){this.process(t)},this)}});e.exports=r},{"./dispatcher":5,"./protoplast":7}],5:[function(t,e,o){var i=t("./protoplast"),n=i.extend({$create:function(){this._topics={}},dispatch:function(t,e){(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,e)})},on:function(t,e,o){if(!e)throw new Error("Handler is required for event "+t);this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:e,context:o})},off:function(t,e,o){this._topics[t]=this._topics[t].filter(function(t){return e?t.handler!==e:t.context!==o})}});e.exports=n},{"./protoplast":7}],6:[function(t,e,o){var i=t("./protoplast"),n=t("./dispatcher"),r=t("./utils"),s={def:function(t,e,o){if(o.$meta.properties.computed&&o.$meta.properties.computed[t]){var i=e.value;delete e.value,delete e.writable,delete e.enumerable,e.get=function(){return void 0===this["_"+t]&&(this["_"+t]=i.call(this)),this["_"+t]},e.set=function(){this["_"+t]=void 0,this.dispatch(t+"_changed",void 0)}}else if(!e.value||-1!==["number","boolean","string","function"].indexOf(typeof e.value)){var n=e.value;delete e.value,delete e.writable,delete e.enumerable,e.get=function(){return this["_"+t]},e.set=function(e){e!==this["_"+t]&&(this["_"+t]=e,this.dispatch(t+"_changed",e))},o["_"+t]=n}}},c=i.extend([n],{$meta:{hooks:[s]},$create:function(){for(var t in this.$meta.properties.computed)this.$meta.properties.computed[t].forEach(function(e){(function(){r.bind(this,e,function(){this[t]=void 0}.bind(this))}).bind(this)(t)},this)}});e.exports=c},{"./dispatcher":5,"./protoplast":7,"./utils":9}],7:[function(t,e,o){(function(o){var i=t("./utils"),n={$meta:{},create:function(){return i.createObject(this,arguments)}};n.extend=function(t,e){var o,n,r,s,c=Object.create(this),a=[];t instanceof Array||(e=t,t=[]),e=e||{},t=t||[],e.$meta&&e.$meta.hooks&&e.$meta.hooks.forEach(function(t){t.desc&&t.desc(e)}),o=e.$meta||{},o.properties=o.properties||{},delete e.$meta,void 0!==e.$create&&(o.constructors=o.constructors||[],o.constructors.push(e.$create),delete e.$create),c=i.mixin(c,t);var u=[];for(var p in e){if(s=!1,e[p]&&e[p].hooks&&!function(t,i){e[t].hooks.forEach(function(e){e.desc&&e.desc(c,t,i),e.proto&&!function(e){a.push(function(o){o[t]=e(o[t],t,o)})}(e.proto),e.instance&&(o.constructors=o.constructors||[],o.constructors.push(function(){this[t]=e.instance(this[t],t,c,this)}))})}(p,e[p]),"[object Object]"!==Object.prototype.toString.call(e[p]))s=!0,r={value:e[p],writable:!0,enumerable:!0,configurable:!0};else{r=e[p];for(var h in r)-1===["value","get","set","writable","enumerable","configurable"].indexOf(h)?(o.properties[h]=o.properties[h]||{},o.properties[h][p]=r[h],delete r[h]):s=!0;r.hasOwnProperty("writable")||r.hasOwnProperty("set")||r.hasOwnProperty("get")||(r.writable=!0),r.hasOwnProperty("enumerable")||(r.enumerable=!0),r.hasOwnProperty("configurable")||(r.configurable=!0)}s&&u.push({property:p,desc:r})}return n=(t||[]).reduce(function(t,e){return i.merge(t,e.$meta)},{}),o=i.merge(o,n),c.$meta=i.merge(o,this.$meta),u.forEach(function(t){var e=t.property,o=t.desc;c.$meta&&c.$meta.hooks&&c.$meta.hooks.forEach(function(t){t.def&&t.def(e,o,c)}),Object.defineProperty(c,e,o)}),a.forEach(function(t){t(c)}),(c.$meta.hooks||[]).forEach(function(t){t.proto&&t.proto(c)}),c},o.Protoplast=n,e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":9}],8:[function(t,e,o){var i=t("./component"),n=t("./utils"),r=i.extend({$meta:{dom_processors:[n.dom_processors.create_component,n.dom_processors.inject_element],hooks:[{proto:function(t){t.$meta.tag&&(t.__registry[t.$meta.tag]=t)}}]},$create:function(){var t=this.init.bind(this);this.init=function(){if(t(),this.$meta.presenter){var e=this.$meta.presenter.create(),o=this.$meta.presenter_type||"both",i=this.$meta.presenter_property||"presenter",n=this.$meta.view_property||"view";"active"!==o&&"both"!==o||(e[n]=this),"passive"!==o&&"both"!==o||(this[i]=this),this.presenter=e,this.___fastinject___(e),this.presenter_ready()}}},presenter_ready:function(){},process_root:function(){var t,e,o;i.process_root.call(this),t=this._root.getElementsByTagName("*");for(var n=0;n<t.length;n++){o=t[n];var r=o.tagName?o.tagName.toLowerCase():"";r&&this.__registry[r]&&(e=this.__registry[r].create(),this.attach(e,o),o.getAttribute("data-id")&&(this[o.getAttribute("data-id")]=e))}for(var s in this.$meta.properties.$)this[s]=this._root.querySelector(this.$meta.properties.$[s])}});e.exports=r},{"./component":2,"./utils":9}],9:[function(t,e,o){function i(t){var e=++a;return(t||"")+e}function n(t,e){var o=Object.create(t);return o.$meta.constructors&&o.$meta.constructors.forEach(function(t){t.apply(o,e)}),o}function r(t,e){for(var o in e)e.hasOwnProperty(o)&&(e[o]instanceof Array?t[o]=e[o].concat(t[o]||[]):-1!==["number","boolean","string","function"].indexOf(typeof e[o])?t.hasOwnProperty(o)||(t[o]=e[o]):(t[o]=t[o]||{},r(t[o],e[o])));return t}function s(t,e){for(var o in e)"__"!==o.substr(0,2)&&(t[o]=e[o]);return t}function c(t,e){return e.forEach(function(e){s(t,e)}),t}var a=0,u={attribute:"data-prop",process:function(t,e,o){!function(e){t[o]=e,t.$meta.element_wrapper&&(t[o]=t.$meta.element_wrapper(t[o]))}(e)}},p={attribute:"data-comp",process:function(t,e,o){var i=t[o]=t.$meta.properties.component[o].create();t.attach(i,e)}},h=function(t,e,o){var i=e.split(".");if(e)if(1===i.length)o(t[e]);else{var n=t[i[0]],r=i.slice(1).join(".");n&&h(n,r,o)}else o(t)},f=function(t,e,o){var i=e.split(".");if(1===i.length)t.on(e+"_changed",o),o(t[e]);else{var n=t[i[0]],r=i.slice(1).join(".");n&&f(n,r,function(){h(n,r,o)}),t.on(i[0]+"_changed",function(){f(t[i[0]],r,o)})}},l=function(t,e,o,i){var n=i.split("."),r=n.pop();f(t,e,function(){h(t,e,function(t){h(o,n.join("."),function(e){e&&(e[r]=t)})})})},d={inject_element:u,create_component:p};e.exports={createObject:n,merge:r,mixin:c,uniqueId:i,dom_processors:d,resolve_property:h,bind:f,bind_property:l}},{}],10:[function(t,e,o){(function(o){var i=t("./js/protoplast"),n=t("./js/app"),r=t("./js/dispatcher"),s=t("./js/di"),c=t("./js/component"),a=t("./js/model"),u=t("./js/tag-component"),p=t("./js/utils"),h=t("./js/constructors"),f={extend:i.extend.bind(i),create:i.create.bind(i),App:n,Dispatcher:r,Context:s,Component:c,Model:a,TagComponent:u,constructors:h,utils:p};o.Protoplast=f,e.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./js/app":1,"./js/component":2,"./js/constructors":3,"./js/di":4,"./js/dispatcher":5,"./js/model":6,"./js/protoplast":7,"./js/tag-component":8,"./js/utils":9}]},{},[10])(10)});