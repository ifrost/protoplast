!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p=t()}}(function(){return function t(e,i,n){function o(s,c){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){var n=t("./protoplast"),o=t("./component"),r=t("./di"),s=n.extend({config:null,context:null,default_config:null,$create:function(){this.context=r.create()},start:function(t){if(this.config=this.default_config||{},this.config.view=this.config.view||{},this.config.context=this.config.context||{},t&&t.view&&t.view.root&&(this.config.view.root=t.view.root),t&&t.view&&t.view.top&&(this.config.view.top=t.view.top),t&&t.context)for(var e in t.context)t.context.hasOwnProperty(e)&&(this.config.context[e]=t.context[e]);for(var i in this.config.context)this.config.context.hasOwnProperty(i)&&this.context.register(i,this.config.context[i]);if(this.context.register(this),this.context.build(),this.config.view&&this.config.view.root&&(this.root=o.Root(this.config.view.root,this.context),this.config.view.top)){var n=this.config.view.top.constructor===Array?this.config.view.top:[this.config.view.top];n.forEach(function(t){this.root.add(t)},this)}}});e.exports=s},{"./component":4,"./di":6,"./protoplast":9}],2:[function(t,e,i){var n=t("./model"),o=n.extend({_filters:null,length:{get:function(){return this._current.length}},$create:function(t){this._source=t,this._current=[],this._filters=[],this._source.on("changed",this._invalidate,this),this._invalidate({added:this._source.toArray()})},add_filter:function(t){this._filters.push(t),this._invalidate()},get:function(t){return this._current[t]},toArray:function(){return this._current},concat:function(){return this._current.concat.apply(this._current,arguments)},forEach:function(){return this._current.forEach.apply(this._current,arguments)},_invalidate:function(t){t||(t={added:this._source.toArray()}),this._current=this._source.toArray(),this._filters.forEach(function(e){t.added.forEach(function(t){e.properties&&e.properties.forEach(function(e){t.on(e+"_changed",this._invalidate.bind(this,void 0),this)},this)},this),this._current=this._current.filter(function(t){return e.fn(t)})},this),this.dispatch("changed")}});e.exports=o},{"./model":8}],3:[function(t,e,i){var n=t("./model"),o=n.extend({$create:function(t){this.array=t||[]},length:{get:function(){return this.array.length}},indexOf:function(){return this.array.indexOf.apply(this.array,arguments)},add:function(t){var e=this.array.push(t);return this.dispatch("changed",{added:[t],removed:[]}),e},remove:function(t){var e=this.array.indexOf(t);-1!==e&&(this.array.splice(e,1),this.dispatch("changed",{added:[],removed:[t]}))},forEach:function(t,e){return this.array.forEach(t,e)},concat:function(){return o.create(this.array.concat.apply(this.array,arguments))},filter:function(t,e){return o.create(this.array.filter(t,e))},toArray:function(){return this.array},toJSON:function(){return this.toArray()}});e.exports=o},{"./model":8}],4:[function(t,e,i){var n=t("./model"),o=(t("./utils"),n.extend({__registry:{value:{}},tag:"",html:"",root:{get:function(){return this._root},set:function(t){this._root=t,this.process_root()}},process_root:function(){var t,e,i,n;this._root&&(this.$meta.dom_processors||[]).forEach(function(o){for(e=this._root.querySelectorAll("["+o.attribute+"]"),t=0;t<e.length;t++)i=e[t],n=i.getAttribute(o.attribute),o.process(this,i,n)},this)},$create:function(){this._children=[],this._inlines=[],this.tag||this.html||(this.tag="div"),this.tag&&!this.html&&(this.html="<"+this.tag+"></"+this.tag+">");var t=document.createElement("div");t.innerHTML=this.html,this.root=t.firstChild},__fastinject__:{get:function(){return this.___fastinject___},set:function(t){this.___fastinject___||(this.___fastinject___=t,this._children.concat(this._inlines).forEach(this.__fastinject__,this))}},init:{inject_init:!0,value:function(){}},destroy:function(){this._children.concat(this._inlines).forEach(function(t){this.remove(t)},this)},add:function(t){if(!t)throw new Error("Child component cannot be null");if(!t.root)throw new Error("Child component should have root property");this._children.push(t),this.__fastinject__&&this.__fastinject__(t),this.root.appendChild(t.root)},remove:function(t){var e=this._children.indexOf(t);-1!==e&&(this._children.splice(e,1),this.root.removeChild(t.root),t.destroy())},attach:function(t,e){this._inlines.push(t),this.root.insertBefore(t.root,e),this.root.removeChild(e)}}));o.Root=function(t,e){var i=o.create();return i.root=t,e&&e.register(i),i},e.exports=o},{"./model":8,"./utils":11}],5:[function(t,e,i){var n=t("./utils"),o={uniqueId:function(){this.$id=n.uniqueId(this.$meta.$prefix)},autobind:function(){for(var t in this)"function"==typeof this[t]&&(this[t]=this[t].bind(this))}};e.exports=o},{"./utils":11}],6:[function(t,e,i){var n=t("./protoplast"),o=t("./dispatcher"),r=n.extend({$create:function(){var t=this;this._objects={pub:function(e,i){t._dispatcher.dispatch(e,i)},sub:function(e){var i=this;return{add:function(n){t._dispatcher.on(e,n,i)},remove:function(n){t._dispatcher.off(e,n,i)}}}},this._unknows=[],this._dispatcher=o.create()},_objects:null,register:function(t,e){1==arguments.length?(e=t,this._unknows.push(e)):this._objects[t]=e,e.__fastinject__=function(t){this.register(t),this.process(t)}.bind(this),e.$meta&&e.$meta.properties&&e.$meta.properties.inject&&this.inject(e,e.$meta.properties.inject)},process:function(t){t.$meta&&t.$meta.properties&&t.$meta.properties.inject_init&&Object.keys(t.$meta.properties.inject_init).forEach(function(e){t[e]()},this),t.$meta&&t.$meta.properties&&t.$meta.properties.sub&&Object.keys(t.$meta.properties.sub).forEach(function(e){this._objects.sub.call(t,t.$meta.properties.sub[e]).add(t[e])},this)},inject:function(t,e){var i,n=this;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],function(e){Object.defineProperty(t,o,{get:function(){return n._objects[e]}})}(i))},build:function(){Object.keys(this._objects).forEach(function(t){var e=this._objects[t];this.process(e)},this),this._unknows.forEach(function(t){this.process(t)},this)}});e.exports=r},{"./dispatcher":7,"./protoplast":9}],7:[function(t,e,i){var n=t("./protoplast"),o=n.extend({$create:function(){this._topics={}},dispatch:function(t,e){(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,e)})},on:function(t,e,i){if(!e)throw new Error("Handler is required for event "+t);this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:e,context:i})},off:function(t,e,i){this._topics[t]=this._topics[t].filter(function(t){return e?t.handler!==e:t.context!==i})}});e.exports=o},{"./protoplast":9}],8:[function(t,e,i){var n=t("./protoplast"),o=t("./dispatcher"),r=t("./utils"),s={def:function(t,e,i){if(i.$meta.properties.computed&&i.$meta.properties.computed[t]){var n=e.value;delete e.value,delete e.writable,delete e.enumerable,e.get=function(){return void 0===this["_"+t]&&(this["_"+t]=n.call(this)),this["_"+t]},e.set=function(){var e=this["_"+t];this["_"+t]=void 0,this.dispatch(t+"_changed",void 0,e)}}else if(!(e.get||e.value&&-1===["number","boolean","string"].indexOf(typeof e.value))){var o=e.value;delete e.value,delete e.writable,delete e.enumerable,e.get=function(){return this["_"+t]},e.set=function(e){if(e!==this["_"+t]){var i=this["_"+t];this["_"+t]=e,this.dispatch(t+"_changed",e,i)}},i["_"+t]=o}}},c=n.extend([o],{$meta:{hooks:[s]},invalidated_injected_bindings:{inject_init:!0,value:function(){for(var t in this.$meta.properties.inject)this.dispatch(t+"_changed")}},$create:function(){for(var t in this.$meta.properties.computed)this.$meta.properties.computed[t].forEach(function(e){(function(){r.bind(this,e,function(){this[t]=void 0}.bind(this))}).bind(this)(t)},this)}});e.exports=c},{"./dispatcher":7,"./protoplast":9,"./utils":11}],9:[function(t,e,i){(function(i){var n=t("./utils"),o={$meta:{},create:function(){return n.createObject(this,arguments)}};o.extend=function(t,e){var i,o,r,s,c=Object.create(this),a=[];t instanceof Array||(e=t,t=[]),e=e||{},t=t||[],e.$meta&&e.$meta.hooks&&e.$meta.hooks.forEach(function(t){t.desc&&t.desc(e)}),i=e.$meta||{},i.properties=i.properties||{},delete e.$meta,void 0!==e.$create&&(i.constructors=i.constructors||[],i.constructors.push(e.$create),delete e.$create),c=n.mixin(c,t);var h=[];for(var u in e){if(s=!1,e[u]&&e[u].hooks&&!function(t,n){e[t].hooks.forEach(function(e){e.desc&&e.desc(c,t,n),e.proto&&!function(e){a.push(function(i){i[t]=e(i[t],t,i)})}(e.proto),e.instance&&(i.constructors=i.constructors||[],i.constructors.push(function(){this[t]=e.instance(this[t],t,c,this)}))})}(u,e[u]),"[object Object]"!==Object.prototype.toString.call(e[u]))s=!0,r={value:e[u],writable:!0,enumerable:!0,configurable:!0};else{r=e[u];for(var f in r)-1===["value","get","set","writable","enumerable","configurable"].indexOf(f)?(i.properties[f]=i.properties[f]||{},i.properties[f][u]=r[f],delete r[f]):s=!0;r.hasOwnProperty("writable")||r.hasOwnProperty("set")||r.hasOwnProperty("get")||(r.writable=!0),r.hasOwnProperty("enumerable")||(r.enumerable=!0),r.hasOwnProperty("configurable")||(r.configurable=!0)}s&&h.push({property:u,desc:r})}return o=(t||[]).reduce(function(t,e){return n.merge(t,e.$meta)},{}),i=n.merge(i,o),c.$meta=n.merge(i,this.$meta),h.forEach(function(t){var e=t.property,i=t.desc;c.$meta&&c.$meta.hooks&&c.$meta.hooks.forEach(function(t){t.def&&t.def(e,i,c)}),Object.defineProperty(c,e,i)}),a.forEach(function(t){t(c)}),(c.$meta.hooks||[]).forEach(function(t){t.proto&&t.proto(c)}),c},i.Protoplast=o,e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":11}],10:[function(t,e,i){var n=t("./component"),o=t("./utils"),r=n.extend({$meta:{dom_processors:[o.dom_processors.create_component,o.dom_processors.inject_element],hooks:[{proto:function(t){t.$meta.tag&&(t.__registry[t.$meta.tag]=t)}}]},$create:function(){var t=this.init.bind(this);this.init=function(){if(t(),this.$meta.presenter){var e=this.$meta.presenter.create(),i=this.$meta.presenter_type||"both",n=this.$meta.presenter_property||"presenter",o=this.$meta.view_property||"view";"active"!==i&&"both"!==i||(e[o]=this),"passive"!==i&&"both"!==i||(this[n]=this),this.presenter=e,this.___fastinject___(e),this.presenter_ready()}}},presenter_ready:function(){},process_root:function(){var t,e,i;n.process_root.call(this),t=this._root.getElementsByTagName("*");for(var o=0;o<t.length;o++){i=t[o];var r=i.tagName?i.tagName.toLowerCase():"";r&&this.__registry[r]&&(e=this.__registry[r].create(),this.attach(e,i),i.getAttribute("data-id")&&(this[i.getAttribute("data-id")]=e))}for(var s in this.$meta.properties.$)this[s]=this._root.querySelector(this.$meta.properties.$[s])}});e.exports=r},{"./component":4,"./utils":11}],11:[function(t,e,i){function n(t){var e=++a;return(t||"")+e}function o(t,e){var i=Object.create(t);return i.$meta.constructors&&i.$meta.constructors.forEach(function(t){t.apply(i,e)}),i}function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Array?t[i]=e[i].concat(t[i]||[]):-1!==["number","boolean","string","function"].indexOf(typeof e[i])?t.hasOwnProperty(i)||(t[i]=e[i]):(t[i]=t[i]||{},r(t[i],e[i])));return t}function s(t,e){for(var i in e)"__"!==i.substr(0,2)&&(t[i]=e[i]);return t}function c(t,e){return e.forEach(function(e){s(t,e)}),t}var a=0,h={attribute:"data-prop",process:function(t,e,i){!function(e){t[i]=e,t.$meta.element_wrapper&&(t[i]=t.$meta.element_wrapper(t[i]))}(e)}},u={attribute:"data-comp",process:function(t,e,i){var n=t[i]=t.$meta.properties.component[i].create();t.attach(n,e)}},f=function(t,e,i){var n=e.split(".");if(e)if(1===n.length)i(t[e]);else{var o=t[n[0]],r=n.slice(1).join(".");o&&f(o,r,i)}else i(t)},p=function(t,e,i){var n=e.split(".");if(1===n.length)t.on(e+"_changed",i),i(t[e]);else{var o=t[n[0]],r=n.slice(1).join(".");o&&p(o,r,function(){f(o,r,i)}),t.on(n[0]+"_changed",function(e,o){p(t[n[0]],r,i)})}},d=function(t,e,i,n){var o=n.split("."),r=o.pop();p(t,e,function(){f(t,e,function(t){f(i,o.join("."),function(e){e&&(e[r]=t)})})})},l=function(t,e,i,n,o){o=o||{},o.remove=o.remove||function(t,e){t.remove(e)},o.create=o.create||function(t,e,i,n){var o=i.create();o[n]=e,t.add(o)},o.update=o.update||function(t,e,i){t[i]=e};var r=function(t,e){for(var r=Math.max(t._children.length,e.length),s=t._children.concat(),c=0;r>c;c++)s[c]&&e.toArray()[c]?o.update(s[c],e.toArray()[c],n):s[c]?e.toArray()[c]||o.remove(t,s[c]):o.create(t,e.toArray()[c],i,n)},s=null,c={};return p(t,e,function(){f(t,e,function(e){s&&(s.off("changed",null,c),s=null),e&&(s=e,e.on("changed",r.bind(c,t,e),c),r.bind(c,t,e)())})}),r},_={inject_element:h,create_component:u};e.exports={createObject:o,merge:r,mixin:c,uniqueId:n,dom_processors:_,resolve_property:f,bind:p,bind_property:d,render_list:l}},{}],12:[function(t,e,i){(function(i){var n=t("./js/protoplast"),o=t("./js/app"),r=t("./js/collection"),s=t("./js/collection-view"),c=t("./js/dispatcher"),a=t("./js/di"),h=t("./js/component"),u=t("./js/model"),f=t("./js/tag-component"),p=t("./js/utils"),d=t("./js/constructors"),l={extend:n.extend.bind(n),create:n.create.bind(n),App:o,Dispatcher:c,Context:a,Component:h,Model:u,Collection:r,CollectionView:s,TagComponent:f,constructors:d,utils:p};i.Protoplast=l,e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./js/app":1,"./js/collection":3,"./js/collection-view":2,"./js/component":4,"./js/constructors":5,"./js/di":6,"./js/dispatcher":7,"./js/model":8,"./js/protoplast":9,"./js/tag-component":10,"./js/utils":11}]},{},[12])(12)});