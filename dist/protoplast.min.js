!function(t){"use strict";function n(t,i){for(var e in i)i[e]instanceof Array?t[e]=i[e].concat(t[e]||[]):-1!==["number","boolean","string"].indexOf(typeof i[e])?t.hasOwnProperty(e)||(t[e]=i[e]):(t[e]=t[e]||{},n(t[e],i[e]));return t}function i(t,n){for(var i in n)"init"!==i&&"__"!==i.substr(0,2)&&(t[i]=n[i]);return t}function e(t,n){return n.forEach(function(n){i(t,n())}),t}function o(t,i){t instanceof Function&&(i=t,t=[]);var c,s=Object.create(this),r={};return i&&i(s,this,r),s.__meta__=n(r,this.__meta__),s.__base__=this,e(s,t||[]),c=function(){var t=Object.create(s);return t.init.apply(t,arguments),t},c.__prototype__=s,c.__meta__=s.__meta__,c.extend=o.bind(s),c}var c=Object.create({});c.init=function(){},c.__meta__={},c.extend=o,t.Protoplast=c}(this),function(t){function n(t,n,i){var e=t[n];t[n]=function(){i.before&&i.before.apply(this,arguments);var t=e.apply(this,arguments);return i.after&&(t=i.after.apply(this,arguments)),t}}var i=t.Protoplast,e=i.extend(function(t){t.init=function(t){this.aop_proto=t.__prototype__},t.aop=function(t,i){t instanceof Array||(t=[t]),t.forEach(function(t){n(this.aop_proto,t,i)},this)}});t.Aop=e}(window),function(t){"use strict";var n=t.Protoplast,i=n.extend(function(t){t.dispatch=function(t,n){this._topics=this._topics||{},(this._topics[t]||[]).forEach(function(t){t.handler.call(t.context,n)})},t.on=function(t,n,i){this._topics=this._topics||{},this._topics[t]=this._topics[t]||[],this._topics[t].push({handler:n,context:i})},t.off=function(t,n,i){this._topics=this._topics||{},this._topics[t]=this._topics[t].filter(function(t){return n?t.handler!==n:t.context!==i})}});t.Dispatcher=i}(this),function(t){var n=t.Dispatcher,i=Protoplast.extend(function(t){t._objects=null,t.init=function(){var t=this;this._objects={pub:function(n,i){t._dispatcher.dispatch(n,i)},sub:function(n){var i=this;return{add:function(e){t._dispatcher.on(n,e,i)},remove:function(e){t._dispatcher.off(n,e,i)}}}},this._dispatcher=n()},t.register=function(t,n){1==arguments.length?n=t:this._objects[t]=n,n.__fastinject__=function(t){this.register(t),t.injected instanceof Function&&t.injected()}.bind(this),this.inject(n,n.__meta__.inject)},t.inject=function(t,n){var i,e=this;for(var o in n)i=n[o],function(n){Object.defineProperty(t,o,{get:function(){return e._objects[n]}})}(i)},t.build=function(){Object.keys(this._objects).forEach(function(t){var n=this._objects[t];n.injected instanceof Function&&n.injected()}.bind(this))}});t.Context=i}(window),function(t){var n=t.Protoplast,i=n.extend(function(t){t.init=function(){this._children=[],this.root=document.createElement(this.__meta__.tag)},t.create=function(){},t.destroy=function(){this._children.forEach(function(t){this.remove(t)},this)},t.injected=function(){this.create()},t.add=function(t){this._children.push(t),this.__fastinject__&&this.__fastinject__(t),this.root.appendChild(t.root)},t.remove=function(t){var n=this._children.indexOf(t);-1!==n&&(this._children.splice(n,1),this.root.removeChild(t.root),t.destroy())}});t.Component=i}(window);